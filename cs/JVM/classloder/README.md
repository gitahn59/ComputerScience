# 자바 클래스로더
자바 클래스를 JVM에 동적으로 로딩하는 JRE(자바 런타임 환경)의 일부이다.    
일반적으로 클래스는 요성 시 한 차례만 로드된다. 자바 런타임 시스템은 클래스로더 때문에   
파일과 파일 시스템에 대해 알 필요가 없다.    
클래스 로더는 로딩(.class), 링크(코드 레퍼런스 연결), 초기화(클래스의 static 값)을 담당한다.

## 종류
- 부트스트랩 클래스 로더(네이티브 코드로 작성)
> JVM 런타임 실행을 위한 기반이 되는 파일들을 로드   
> <JAVA_HOME>/jre/lib에 위치한 핵심 자바 라이브러리를 로딩   

- 확장 클래스 로더(Java9부터는 플랫폼 클래스 로더)
> 확장 디렉터리(<JAVA_HOME>/jre/lib/ext 또는 java.dex.dirs 시스템 속성)에 지정된 코드를 로드   

- 애플리케이션 클래스로더(java9부터는 시스템 클래스 로더)
> 확장 클래스 로드를 상송      
> CLASSPATH에 정의되거나, JVM 옵션에서 -cp, -classpath에 의해 지정된 클래스들이 로딩된다.   

- 사용자 정의 클래스 로더
> 애플리케이션 사용자가 직접 코드 상에서 생성해서 사용하는 클래스 로더   

## 기능
- 로딩 
> .class파일을 읽어 바이트 코드를 메소드 영역에 저장   
> 클래스가 로딩되면 힙 메모리 영역에 로딩된 클래스 유형의 객체를 생성   

- 링킹(Linking)
> 증명(Verification) : class 파일의 정확성 보장, 파일이 적절한 포맷, 유요한 컴파일러로 생성되었는지 확인       
> 검증에 실패하면 런타임 에러 발생(java.lang.VerifyError)   

> 준비(Preparation) : JVM은 메모리를 기본 값으로 초기화 후 클래스 변수들을 메모리에 할당   

> 해결(Resolution) : 심볼릭 참조를 직접 참조로 변경   

- 초기화(Initialization) : 정적 변수 초기화

## 원칙
- 위임 원칙(Delegation Principle)
> 클래스 로딩이 필요할 때 부모 클래스 로더로 로딩을 위임하는 것 

System -(위임)> Extension -(위임)> Bootstrap   
Bootstrap -(실패)> Extension -(실패)> System

- 가시성 원칙(Visibility Principle)
> 하위 클래스로더는 상위 클래스 로더가 로딩한 클래스를 볼 수 있지만, 그 역은 성립하지 않는다.

- 유일성 원칙(Uniqueness Principle)
> 하위 클래스 로더는 상위 클래스로더가 로딩한 클래스를 다시 로딩하지 않도록 하여 유일성을 보장한다.

- 언로드 불가
> 클래스 로더에 의해 로딩된 클래스들은 다시 JVM 상에서 없앨 수 없다. 